@{
    @model ZonaRival.Models.ViewModels.EquipoViewModel;
                                                                                                                                                                                                  
}
<!-- HTML BIENVENIDA -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZonaRival - Inicio</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/index.css" asp-append-version="true">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background">
        <!-- Elementos decorativos del fondo -->
        <div class="starball starball-1"></div>
        <div class="starball starball-2"></div>

        <!-- Contenedor principal -->
        <div class="home-container">
            <div class="welcome-section">
                <h1 class="welcome-message">Bienvenido a ZonaRival</h1>
                <p class="motivational-quote" id="motivational-quote"></p>
            </div>

            <div class="sections-container">
                <!-- Apartado de información del equipo -->
                <div class="section">
                    <h2 class="section-title">Información del Equipo</h2>
                    <div class="team-info">
                        <div class="info-item">
                            <span class="info-label">Nombre del Equipo:</span>
                            <span class="info-value" data-team-name>@(Model.equipoViewModel.NombreEquipo ?? "Sin nombre")</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Cantidad de Jugadores:</span>
                            <span class="info-value" data-players-count>@(Model.equipoViewModel.CantidadJugadores > 0 ? Model.equipoViewModel.CantidadJugadores.ToString() : "No especificado")</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Rango de Edad:</span>
                            <span class="info-value" data-age-range>@(Model.equipoViewModel.RangoEdad ?? "No especificado")</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Color de Uniforme:</span>
                            <span class="info-value" data-uniform-color>@(Model.equipoViewModel.ColorUniforme ?? "No especificado")</span>
                        </div>

                        <div class="info-item">
                            <span class="info-label">Canchas de Preferencia:</span>
                            <span class="info-value" data-preferred-courts>
                                @if (Model.equipoViewModel.EquiposCanchas != null && Model.equipoViewModel.EquiposCanchas.Any())
                                {
                                    var canchasValidas = Model.equipoViewModel.EquiposCanchas
                                    .Where(ec => ec != null && ec.Cancha != null && ec.Cancha.NombreCancha != null)
                                    .Select(ec => ec.Cancha.NombreCancha);
                                    if (canchasValidas.Any())
                                    {
                                        @string.Join(", ", canchasValidas)
                                    }
                                    else
                                    {
                                        @: Ninguna
                                    }
                                }
                                else
                                {
                                    @: Ninguna
                                }
                            </span>
                        </div>
                    </div>
                    <button type="button" class="edit-btn" data-bs-toggle="modal" data-bs-target="#editModal">Editar Información</button>
                </div>

              
                <!-- Apartado de equipos disponibles -->
                <div class="section">
                    <h2 class="section-title">Equipos Disponibles</h2>
                    <div class="available-teams">
                        <div class="row" data-teams-list>
                            @foreach (var equipo in Model.ListaEquipos)
                            {
                                <div class="col-12 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">@equipo.NombreEquipo</h5>
                                            <h5 class="card-title">@equipo.CantidadJugadores</h5>
                                            <h5 class="card-title">@equipo.ColorUniforme</h5>
                                            <h5 class="card-title">@equipo.RangoEdad</h5>
                                      
                                            <form asp-action="DesafiarEquipo" asp-controller="Equipo" method="post">
                                                <input type="hidden" name="equipoId" value="@equipo.EquipoId" />
                                                <input type="hidden" name="equipoDesafiadoId" value="@Model.equipoViewModel.EquipoId" />
                                                <button type="submit" class="btn btn-primary">Desafiar</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                    <form asp-action="ToggleDisponibilidad" asp-controller="Equipo" method="post">
                        <input type="hidden" name="equipoId" value="@Model.equipoViewModel.EquipoId" />
                        @if (Model.equipoViewModel.Disponibilidad)
                        {
                            <button type="submit" class="availability-btn">Quitar Disponibilidad</button>
                        }
                        else
                        {
                            <button type="submit" class="availability-btn">Habilitar Disponibilidad</button>
                        }
                    </form>
                </div>

                <!-- Apartado de historial de partidos -->
                <div class="section">
                    <h2 class="section-title">Historial de Partidos</h2>
                    <div class="match-history">
                        <ul class="history-list" data-match-history>
                            <!-- Historial de partidos se cargará dinámicamente -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar información del equipo -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Editar Información del Equipo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <form id="editTeamForm" method="post" asp-controller="Home" asp-action="EditEquipo">
                    <input type="hidden" name="EquipoId" value="@Model.equipoViewModel.EquipoId" />
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="NombreEquipo" class="form-label">Nombre del Equipo</label>
                            <input type="text" class="form-control" id="NombreEquipo" name="NombreEquipo" value="@Model.equipoViewModel.NombreEquipo" required>
                        </div>
                        <div class="mb-3">
                            <label for="CantidadJugadores" class="form-label">Cantidad de Jugadores</label>
                            <input type="number" class="form-control" id="CantidadJugadores" name="CantidadJugadores" value="@Model.equipoViewModel.CantidadJugadores" min="1" required>
                        </div>
                        <div class="mb-3">
                            <label for="RangoEdad" class="form-label">Rango de Edad</label>
                            <input type="text" class="form-control" id="RangoEdad" name="RangoEdad" value="@Model.equipoViewModel.RangoEdad" required>
                        </div>
                        <div class="mb-3">
                            <label for="ColorUniforme" class="form-label">Color de Uniforme</label>
                            <input type="text" class="form-control" id="ColorUniforme" name="ColorUniforme" value="@Model.equipoViewModel.ColorUniforme" required>
                        </div>
                        <!-- Canchas de Preferencia no editable aquí, backend puede manejarlo -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Array de frases motivacionales sobre fútbol
        const motivationalPhrases = [
            "El fútbol es la poesía de los movimientos.",
            "Gana o pierde, pero nunca te rindas en el campo.",
            "El éxito no es definitivo, el fracaso no es fatal: es el coraje para continuar lo que cuenta.",
            "En el fútbol, como en la vida, lo importante es jugar con el corazón.",
            "Cada partido es una nueva oportunidad para demostrar tu pasión.",
            "El verdadero campeón es aquel que se levanta después de caer.",
            "El fútbol une a las personas y crea recuerdos inolvidables.",
            "La victoria pertenece al más perseverante.",
            "Juega con inteligencia, corre con determinación.",
            "El balón no conoce de colores, solo de talento."
        ];

        // Función para seleccionar una frase al azar
        function getRandomPhrase() {
            const randomIndex = Math.floor(Math.random() * motivationalPhrases.length);
            return motivationalPhrases[randomIndex];
        }

        // Asignar la frase al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            const quoteElement = document.getElementById('motivational-quote');
            quoteElement.textContent = getRandomPhrase();
        });
    </script>
</body>
</html>
